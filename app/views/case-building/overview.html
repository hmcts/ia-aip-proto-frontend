{% extends "layout.html" %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/tabs/macro.njk" import govukTabs %}
{% from "govuk/components/table/macro.njk" import govukTable %}
{% from "components/status-bar.html" import statusBar with context %}
{% from "govuk/components/warning-text/macro.njk" import govukWarningText %}
{% from "govuk/components/inset-text/macro.njk" import govukInsetText %}

{% block content %}
        <div id="appeal-details">
            <h2 class="govuk-heading-m">{{ appealData.yourDetails.personalDetails.givenNames }} {{ appealData.yourDetails.personalDetails.familyName }}</h2>
            <p class="govuk-body">Appeal reference: {{ appealData.yourDetails.homeOffice.refNumber }}</p>
        </div>
        <div class="divider"></div>

    {% set overview %}
            <h2 class="govuk-heading-m">Current progress of the case</h2>

        {{ statusBar(stages) }}

        <h2 class="govuk-heading-m">Do this next</h2>

        {% if not reasonsForAppealCompleted %}
            <p class="govuk-body">We are now going to ask you why you're appealing against the Home Office's decision.</p>
            <p class="govuk-body">What you'll need</p>
            <ul class="govuk-list govuk-list--bullet">
                <li>
                    The Home Office decision letter, which you can access within the Home office bundle in the
                    <a href="#documents" class="govuk-link" aria-describedby="documents-tab">documents tab</a>
                </li>
                <li>Any evidence that will support your appeal</li>
            </ul>
            <p class=""govuk-body><a href="#">Find out more about evidence</a></p>

            {% if appealData.appealDetails.reasonsForAppeal.draft %}
                <p></p>
                {{ govukInsetText({
                    text: "Reasons for appeal is draft"
                }) }}
            {% endif %}

            {{ govukWarningText({
                html: "You need to respond by " + appealData.respondByDate + ". <a href=\"#\" class=\"govuk-link\">Ask for more time</a>",
                iconFallbackText: "Warning"
            }) }}

            {% if appealData.appealDetails.reasonsForAppeal.draft %}
                {{ govukButton({
                    text: "Complete response",
                    href: "/case-building/reasons-for-appeal",
                    isStartButton: false
                }) }}
            {% else %}
                {{ govukButton({
                    text: "Tell us why you're appealing",
                    href: "/case-building/why-appealing-description",
                    isStartButton: false
                }) }}
            {% endif %}

        {% elseif not appealData.questions %}
            <p>A case officer is now checking your response. You will receive an email soon of what to do next.</p>
        {% else %}
            <p class="govuk-body">We need some more information from you so we can complete your appeal.</p>
            <p class="govuk-body">What you'll need</p>
            <ul class="govuk-list govuk-list--bullet">
                <li>
                    The Home Office decision letter, which you can access within the Home office bundle in the
                    <a href="#documents" class="govuk-link" aria-describedby="documents-tab">documents tab</a>
                </li>
                <li>Any evidence you submitted to the Tribunal</li>
                <li>Any evidence that will support your appeal</li>
            </ul>
            {{ govukWarningText({
                html: "You need to respond by " + appealData.respondByDate + ". <a href=\"#\" class=\"govuk-link\">Ask for more time</a>",
                iconFallbackText: "Warning"
            }) }}

            {{ govukButton({
                text: "Questions from the Tribunal",
                href: "/case-building/questions-from-tribunal",
                isStartButton: false
            }) }}
        {% endif %}
    {% endset -%}

    {% set appeal %}
        Appeal
    {% endset -%}

        {{ govukTabs({
            items: [
                {
                    label: "Overview",
                    id: "overview",
                    panel: {
                    html: overview
                }
                },
                {
                    label: "Appeal",
                    id: "appeal",
                    panel: {
                    html: appeal
                }
                },
                {
                    label: "Documents",
                    id: "documents",
                    panel: {
                    html: "documents"
                }
                },
                {
                    label: "Messages",
                    id: "messages",
                    panel: {
                    html: "message"
                }
                }
            ]
        }) }}
{% endblock %}
